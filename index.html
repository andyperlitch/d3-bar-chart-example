<!DOCTYPE html>
<body>
<style>
.chart {
  width: 80%;
  height: 500px;
  margin: 20px auto;
}
.chart rect {
  fill: steelblue;
}

.chart text {
  fill: white;
  font: 10px sans-serif;
  text-anchor: end;
}
</style>

<svg class="chart"></svg>
<script src="bower_components/jquery/dist/jquery.js"></script>
<script src="bower_components/d3/d3.min.js"></script>
<script>

var chart = d3.select(".chart");
var $chart = $(chart[0]);
var x = d3.scale.linear();

d3.csv("datasets/santaclara-5-23-13.csv", function(data) {

  x.domain([0, d3.max(data, function(d) {return d.TemperatureF})]).range([0, $chart.width()]);

  var barHeight = Math.floor($chart.height() / data.length);

  var bars = chart.selectAll("g");
  var barsUpdate = bars.data(data)
  var barEnter = barsUpdate.enter().append("g");
  barEnter.attr("transform", function(d, i) {
    return "translate(0, " + (i * barHeight) + ")";
  });
  barEnter.append("rect")
    .attr("width", function(d) {
      return x(d.TemperatureF);
    })
    .attr("height", (barHeight - 1) + "px")
  barEnter.append("text")
    .attr("x", function(d) {
      return x(d.TemperatureF) - 3;
    })
    .attr("y", barHeight / 2)
    .attr("dy", ".35em")
    .text(function(d) {
      return d.TimePDT + ": " + d.TemperatureF + "Â°F";
    });
});
  
</script>
</body>